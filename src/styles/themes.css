/* Default/fallback values */
:root {
  --os-font-ui: Geneva, Chicago, -apple-system, BlinkMacSystemFont, sans-serif;
  --os-font-mono: Monaco, monospace;
  --os-color-window-bg: #ffffff;
  --os-color-menubar-bg: #ffffff;
  --os-color-menubar-border: #000000;
  --os-color-menubar-text: #000000;
  --os-color-window-border: #000000;
  --os-color-titlebar-active-bg: #ffffff;
  --os-color-titlebar-inactive-bg: #ffffff;
  --os-color-titlebar-text: #000000;
  --os-color-titlebar-text-inactive: #666666;
  --os-color-button-face: #ffffff;
  --os-color-button-highlight: #ffffff;
  --os-color-button-shadow: #808080;
  --os-color-button-active-face: #cccccc;
  --os-color-selection-bg: #000000;
  --os-color-selection-text: #ffffff;
  --os-color-text-primary: #000000;
  --os-color-text-secondary: #666666;
  --os-color-text-disabled: #999999;
  --os-metrics-border-width: 2px;
  --os-metrics-radius: 0.5rem;
  --os-metrics-titlebar-height: 1.5rem;
  --os-metrics-menubar-height: 1.75rem; /* 28px */
  --os-window-shadow: 2px 2px 0px 0px rgba(0, 0, 0, 0.5);
}

/* System 7 Theme */
:root[data-os-theme="system7"] {
  --os-font-ui: "ChicagoKare", Geneva, -apple-system, BlinkMacSystemFont,
    sans-serif;
  --os-font-mono: Monaco, monospace;
  --os-color-window-bg: #ffffff;
  --os-color-menubar-bg: #ffffff;
  --os-color-menubar-border: #000000;
  --os-color-menubar-text: #000000;
  --os-color-window-border: #000000;
  --os-color-titlebar-active-bg: #ffffff;
  --os-color-titlebar-inactive-bg: #ffffff;
  --os-color-titlebar-text: #000000;
  --os-color-titlebar-text-inactive: #666666;
  --os-color-titlebar-pattern: linear-gradient(#000 50%, transparent 0);
  --os-color-button-face: #ffffff;
  --os-color-button-highlight: #ffffff;
  --os-color-button-shadow: #808080;
  --os-color-button-active-face: #cccccc;
  --os-color-selection-bg: #000000;
  --os-color-selection-text: #ffffff;
  --os-color-text-primary: #000000;
  --os-color-text-secondary: #666666;
  --os-color-text-disabled: #999999;
  --os-metrics-border-width: 2px;
  --os-metrics-radius: 0px; /* System 7 has square corners */
  --os-metrics-titlebar-height: 1.5rem;
  --os-metrics-menubar-height: 1.75rem; /* 28px */
  --os-window-shadow: 2px 2px 0px 0px rgba(0, 0, 0, 0.5);
}

/* Mac OS X Theme */
:root[data-os-theme="macosx"] {
  --os-font-ui: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
    "SF Pro Display", "SF Pro Text", sans-serif;
  --os-font-mono: Monaco, Menlo, monospace;
  --os-color-window-bg: #ececec;
  --os-color-menubar-bg: linear-gradient(to bottom, #f8f8f8, #d4d4d4);
  --os-color-menubar-border: rgba(0, 0, 0, 0.44);
  --os-color-menubar-text: #000000;
  --os-color-window-border: rgba(0, 0, 0, 0.2);
  --os-color-window-border-inactive: rgba(0, 0, 0, 0.08);
  --os-color-titlebar-border: rgba(0, 0, 0, 0.1);
  --os-color-titlebar-border-inactive: rgba(0, 0, 0, 0.05);
  --os-color-titlebar-active-bg: linear-gradient(
    to bottom,
    #f6f6f6 0%,
    #dadada 100%
  );
  --os-color-titlebar-inactive-bg: linear-gradient(to bottom, #f6f6f6, #e0e0e0);
  --os-color-titlebar-text: #000000;
  --os-color-titlebar-text-inactive: #7f7f7f;
  --os-color-button-face: #ffffff;
  --os-color-button-highlight: #ffffff;
  --os-color-button-shadow: rgba(0, 0, 0, 0.4);
  --os-color-button-active-face: #e0e0e0;
  --os-color-traffic-light-close: #4a0a07;
  --os-color-traffic-light-minimize: #7a5915;
  --os-color-traffic-light-maximize: #10541a;
  --os-color-selection-bg: #3067da;
  --os-color-selection-text: #ffffff;
  --os-color-text-primary: #000000;
  --os-color-text-secondary: #4b4b4b;
  --os-color-text-disabled: #999999;
  --os-metrics-border-width: 0.5px;
  --os-metrics-titlebar-border-width: 0.5px;
  --os-metrics-radius: 0.45rem;
  --os-metrics-titlebar-height: 1.375rem;
  --os-metrics-menubar-height: 1.5rem;
  --os-window-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
  /* Pinstripe patterns */
  --os-pinstripe-titlebar: repeating-linear-gradient(
    0deg,
    transparent 0px,
    transparent 2px,
    rgba(255, 255, 255, 0.8) 1px,
    rgba(255, 255, 255, 0.8) 2px,
    transparent 2px,
    transparent 3px,
    rgba(0, 0, 0, 0.1) 3px,
    rgba(0, 0, 0, 0.1) 4px
  );
  --os-pinstripe-window: repeating-linear-gradient(
    0deg,
    transparent 0px,
    transparent 1px,
    rgba(255, 255, 255, 0.6) 1px,
    rgba(255, 255, 255, 0.6) 2px,
    transparent 2px,
    transparent 3px,
    rgba(0, 0, 0, 0.08) 3px,
    rgba(0, 0, 0, 0.08) 4px
  );
}

/* Windows 98 Theme */
:root[data-os-theme="win98"] {
  --os-font-ui: Tahoma, "MS Sans Serif", sans-serif;
  --os-font-mono: Consolas, "Courier New", monospace;
  --font-ms-sans: "Pixelated MS Sans Serif", "MS Sans Serif", sans-serif;
  --os-color-window-bg: #c0c0c0;
  --os-color-menubar-bg: #c0c0c0;
  --os-color-menubar-border: #808080;
  --os-color-menubar-text: #000000;
  --os-color-window-border: #000000;
  --os-color-titlebar-active-bg: linear-gradient(to right, #000084, #1084d0);
  --os-color-titlebar-inactive-bg: linear-gradient(to right, #808080, #c0c0c0);
  --os-color-titlebar-text: #ffffff;
  --os-color-titlebar-text-inactive: #e0e0e0;
  --os-color-button-face: #c0c0c0;
  --os-color-button-highlight: #ffffff;
  --os-color-button-shadow: #808080;
  --os-color-button-active-face: #b0b0b0;
  --os-color-selection-bg: #000080;
  --os-color-selection-text: #ffffff;
  --os-color-text-primary: #000000;
  --os-color-text-secondary: #333333;
  --os-color-text-disabled: #7f7f7f;
  --os-metrics-border-width: 2px;
  --os-metrics-radius: 0px;
  --os-metrics-titlebar-height: 1.375rem;
  --os-metrics-menubar-height: 1.375rem;
  --os-window-shadow: none;
}

/* Windows XP Theme */
:root[data-os-theme="xp"] {
  --os-font-ui: Tahoma, Segoe UI, sans-serif;
  --os-font-mono: Consolas, Courier New, monospace;
  --font-ms-sans: "Pixelated MS Sans Serif", "MS Sans Serif", sans-serif;
  --os-color-window-bg: #ece9d8;
  --os-color-menubar-bg: linear-gradient(to bottom, #245edc, #1941a5);
  --os-color-menubar-border: #0a246a;
  --os-color-menubar-text: #ffffff;
  --os-color-window-border: #0054e3;
  --os-color-titlebar-active-bg: linear-gradient(to bottom, #0058e6, #1941a5);
  --os-color-titlebar-inactive-bg: linear-gradient(to bottom, #8b9dc3, #7a8aab);
  --os-color-titlebar-text: #ffffff;
  --os-color-titlebar-text-inactive: #d5ddf3;
  --os-color-button-face: #ece9d8;
  --os-color-button-highlight: #ffffff;
  --os-color-button-shadow: #aca899;
  --os-color-button-active-face: #d8d5c8;
  --os-color-selection-bg: #316ac5;
  --os-color-selection-text: #ffffff;
  --os-color-text-primary: #000000;
  --os-color-text-secondary: #5a5a5a;
  --os-color-text-disabled: #a0a0a0;
  --os-metrics-border-width: 3px;
  --os-metrics-radius: 0.5rem;
  --os-metrics-titlebar-height: 1.875rem;
  --os-metrics-menubar-height: 1.875rem;
  --os-window-shadow: 0 4px 8px rgba(0, 0, 0, 0.25);
}

/* Backwards compatibility aliases */
.bg-system7-window-bg {
  background: var(--os-color-window-bg);
}

.bg-system7-menubar-bg {
  background: var(--os-color-menubar-bg);
}

/* Mac OS X Aqua Button Styles */
.aqua-button {
  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
    "SF Pro Display", "SF Pro Text", sans-serif;
  font-size: 13px;
  line-height: 1;
  height: 24px;
  padding: 0 16px;
  min-width: auto;
  border-radius: 12px;
  position: relative;
  overflow: hidden;
  cursor: default;
  outline: none;
  border: none;
  box-sizing: border-box;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
  -webkit-font-smoothing: antialiased;
  font-smooth: auto;
}

.aqua-button.primary {
  background: linear-gradient(
    rgba(0, 65, 184, 0.625),
    rgba(45, 115, 199, 0.625),
    rgba(33, 160, 196, 0.625)
  );
  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.3), 0 1px 1px rgba(0, 78, 187, 0.5),
    inset 0 1px 3px rgba(0, 17, 49, 0.8),
    inset 0 2px 3px 1px rgba(0, 78, 187, 0.75);
}

.aqua-button.primary:focus,
.aqua-button.primary:active {
  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.3), 0 1px 1px rgba(0, 78, 187, 0.5),
    inset 0 1px 3px rgba(0, 17, 49, 0.8),
    inset 0 2px 3px 1px rgba(0, 78, 187, 0.75), 0 0 3px rgba(52, 106, 227, 0.5);
}

.aqua-button.secondary {
  background: linear-gradient(
    rgba(160, 160, 160, 0.625),
    rgba(255, 255, 255, 0.625)
  );
  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.2), 0 1px 1px rgba(0, 0, 0, 0.3),
    inset 0 1px 2px rgba(0, 0, 0, 0.4), inset 0 2px 3px 1px #bbbbbb;
}

.aqua-button.secondary:focus,
.aqua-button.secondary:active {
  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.2), 0 1px 1px rgba(0, 0, 0, 0.3),
    inset 0 1px 2px rgba(0, 0, 0, 0.4), inset 0 2px 3px 1px #bbbbbb,
    0 0 3px rgba(0, 0, 0, 0.25);
}

/* Top shine */
.aqua-button:before {
  content: "";
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  height: 33%;
  background: linear-gradient(
    rgba(255, 255, 255, 0.9),
    rgba(255, 255, 255, 0.3)
  );
  width: calc(100% - 6px);
  border-radius: 8px 8px 2px 2px;
  top: 2px;
  filter: blur(0.5px);
  z-index: 2;
  pointer-events: none;
}

/* Bottom glow */
.aqua-button:after {
  content: "";
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  height: 33%;
  background: linear-gradient(
    rgba(255, 255, 255, 0.2),
    rgb(255, 255, 255, 0.5)
  );
  width: calc(100% - 8px);
  border-radius: 4px;
  bottom: 2px;
  filter: blur(1px);
  pointer-events: none;
}

/* Text styling */
.aqua-button span,
.aqua-button {
  position: relative;
  z-index: 3;
  font-weight: 500;
  color: white;
}

.aqua-button.primary span,
.aqua-button.primary {
  text-shadow: 0 1px 1px rgba(30, 77, 161, 0.5);
}

.aqua-button.secondary span,
.aqua-button.secondary {
  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.25);
  color: black;
}

/* macOS Theme Font Overrides */
:root[data-os-theme="macosx"] body {
  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
    "SF Pro Display", "SF Pro Text", sans-serif !important;
  -webkit-font-smoothing: antialiased !important;
  font-smooth: auto !important;
  font-size: 12px !important;
}

:root[data-os-theme="macosx"] * {
  font-family: inherit;
}

/* Ensure all UI elements in macOS theme use proper antialiasing */
:root[data-os-theme="macosx"] input,
:root[data-os-theme="macosx"] label,
:root[data-os-theme="macosx"] button,
:root[data-os-theme="macosx"] select,
:root[data-os-theme="macosx"] textarea,
:root[data-os-theme="macosx"] .menubar,
:root[data-os-theme="macosx"] .window,
:root[data-os-theme="macosx"] .title-bar {
  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
    "SF Pro Display", "SF Pro Text", sans-serif !important;
  -webkit-font-smoothing: antialiased !important;
  font-smooth: auto !important;
}

/* macOS specific font sizes and gloss effect */
:root[data-os-theme="macosx"] .menubar {
  font-size: 14px !important;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.8);
  font-weight: normal !important;
  position: relative;
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.5) inset,
    0 -1px 0 rgba(0, 0, 0, 0.1) inset;
}

/* Add gloss effect to macOS menubar */
:root[data-os-theme="macosx"] .menubar::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 50%;
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.3),
    rgba(255, 255, 255, 0.1)
  );
  pointer-events: none;
  z-index: 1;
}

/* macOS menubar buttons should have regular weight and padding */
:root[data-os-theme="macosx"] .menubar button {
  font-weight: normal !important;
  padding-top: 0.25rem !important;
  padding-bottom: 0.25rem !important;
  position: relative;
  z-index: 2;
}

:root[data-os-theme="macosx"] .title-bar {
  font-size: 13px !important;
}

:root[data-os-theme="macosx"] button:not(.aqua-button):not(.aqua-tab) {
  font-size: 13px !important;
  font-weight: normal !important;
}

:root[data-os-theme="macosx"] input,
:root[data-os-theme="macosx"] select,
:root[data-os-theme="macosx"] textarea {
  font-size: 12px !important;
}

:root[data-os-theme="macosx"] label {
  font-size: 11px !important;
}

:root[data-os-theme="macosx"] .window-body {
  font-size: 12px !important;
}

:root[data-os-theme="macosx"] p,
:root[data-os-theme="macosx"] div {
  font-size: 13px !important;
}

/* Preserve bookmark bar button text size in Internet Explorer */
/* Target bookmark buttons with highest specificity */
:root[data-os-theme="macosx"]
  button.whitespace-nowrap.hover\:bg-gray-200.font-geneva-12.text-\[10px\] {
  font-size: 10px !important;
}

:root[data-os-theme="macosx"]
  button.whitespace-nowrap.hover\:bg-gray-200.font-geneva-12.text-\[10px\]
  span {
  font-size: 10px !important;
}

/* Also override any text-sm class on these buttons */
:root[data-os-theme="macosx"] button.text-sm.font-geneva-12 {
  font-size: 10px !important;
}

:root[data-os-theme="macosx"] button.text-sm.font-geneva-12 span {
  font-size: 10px !important;
}

/* Preserve LCD display styling in Videos app */
:root[data-os-theme="macosx"] .videos-lcd .font-geneva-12.text-\[10px\] {
  font-size: 10px !important;
  font-family: Geneva-12, monospace !important;
}

:root[data-os-theme="macosx"] .videos-lcd .font-geneva-12 .text-xl {
  font-size: 1.25rem !important;
  font-family: Geneva-12, monospace !important;
}

:root[data-os-theme="macosx"] .videos-lcd .text-xl {
  font-size: 1.25rem !important;
  font-family: Geneva-12, monospace !important;
}

/* Ensure AnimatedNumber components inherit correct size */
:root[data-os-theme="macosx"] .videos-lcd .text-xl * {
  font-size: inherit !important;
  font-family: inherit !important;
}

:root[data-os-theme="macosx"] .videos-lcd .font-geneva-12.text-\[18px\] {
  font-size: 18px !important;
  font-family: Geneva-12, monospace !important;
}

/* macOS select styling - similar to aqua buttons */
:root[data-os-theme="macosx"] select {
  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
    "SF Pro Display", "SF Pro Text", sans-serif !important;
  font-size: 14px !important;
  line-height: 1;
  height: 22px;
  padding: 2px 24px 2px 8px;
  min-width: 60px;
  border-radius: 6px;
  position: relative;
  overflow: hidden;
  cursor: default;
  outline: none;
  border: none;
  box-sizing: border-box;
  display: inline-flex;
  align-items: center;
  justify-content: flex-start;
  white-space: nowrap;
  -webkit-font-smoothing: antialiased !important;
  font-smooth: auto !important;
  background: linear-gradient(
    rgba(160, 160, 160, 0.625),
    rgba(255, 255, 255, 0.625)
  );
  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.2), 0 1px 1px rgba(0, 0, 0, 0.3),
    0 0 0 1px rgba(0, 0, 0, 0.3);
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 2L6 7L11 2' stroke='%23333' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  background-position: right 6px center;
  background-repeat: no-repeat;
  color: black;
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.5);
}

/* Top shine/gloss for macOS select */
:root[data-os-theme="macosx"] select:before,
:root[data-os-theme="macosx"] .macos-select-trigger:before {
  content: "";
  position: absolute;
  left: 1px;
  right: 1px;
  height: 40%;
  background: linear-gradient(
    rgba(255, 255, 255, 0.9),
    rgba(255, 255, 255, 0.3)
  );
  border-radius: 5px 5px 2px 2px;
  top: 1px;
  pointer-events: none;
  z-index: 1;
}

/* Arrow indicator for macOS select */
:root[data-os-theme="macosx"] .macos-select-trigger:after {
  content: "";
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  width: 8px;
  height: 10px;
  background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg width='8' height='10' viewBox='0 0 8 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 3.5L4 1L7 3.5M1 6.5L4 9L7 6.5' stroke='%23333' stroke-width='1' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: center;
  pointer-events: none;
  z-index: 2;
}

:root[data-os-theme="macosx"] select:focus {
  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.2), 0 1px 1px rgba(0, 0, 0, 0.3),
    0 0 0 1px rgba(0, 0, 0, 0.3), 0 0 3px rgba(52, 106, 227, 0.5);
  outline: none;
}

:root[data-os-theme="macosx"] select:active {
  background: linear-gradient(
    rgba(140, 140, 140, 0.625),
    rgba(235, 235, 235, 0.625)
  );
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.3),
    inset 0 1px 1px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(0, 0, 0, 0.2);
}

/* System 7 specific select styling with retro borders */
:root[data-os-theme="system7"] select {
  font-family: "ChicagoKare", Geneva, -apple-system, BlinkMacSystemFont,
    sans-serif !important;
  font-size: 12px !important;
  border: 2px inset #c0c0c0;
  background-color: #ffffff;
  padding: 2px 4px;
  border-radius: 0;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  box-shadow: inset -1px -1px #000000, inset 1px 1px #dfdfdf;
}

:root[data-os-theme="system7"] select:focus {
  outline: 1px dotted #000000;
  outline-offset: -2px;
}

/* Yosemite-style traffic lights - clean and simple */

/* macOS Traffic Light Aqua Styling */
:root[data-os-theme="macosx"] .title-bar button[aria-label="Close"],
:root[data-os-theme="macosx"] .title-bar button[aria-label="Minimize"],
:root[data-os-theme="macosx"] .title-bar button[aria-label="Maximize"] {
  position: relative;
  overflow: hidden;
  border-radius: 50% !important;
  border: none !important;
  transition: all 0.15s ease;
}

/* Close button (Red) - Aqua style */
:root[data-os-theme="macosx"] .title-bar button[aria-label="Close"] {
  background: linear-gradient(
    rgba(255, 96, 87, 0.8),
    rgba(225, 70, 64, 0.8),
    rgba(200, 50, 44, 0.8)
  ) !important;
  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.3), 
              0 1px 1px rgba(225, 70, 64, 0.5),
              inset 0 1px 3px rgba(100, 20, 20, 0.6),
              inset 0 2px 3px 1px rgba(255, 120, 110, 0.6) !important;
}

/* Minimize button (Yellow) - Aqua style */
:root[data-os-theme="macosx"] .title-bar button[aria-label="Minimize"] {
  background: linear-gradient(
    rgba(255, 189, 46, 0.8),
    rgba(223, 161, 35, 0.8),
    rgba(200, 140, 20, 0.8)
  ) !important;
  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.3), 
              0 1px 1px rgba(223, 161, 35, 0.5),
              inset 0 1px 3px rgba(120, 80, 10, 0.6),
              inset 0 2px 3px 1px rgba(255, 210, 80, 0.6) !important;
}

/* Maximize button (Green) - Aqua style */
:root[data-os-theme="macosx"] .title-bar button[aria-label="Maximize"] {
  background: linear-gradient(
    rgba(39, 201, 63, 0.8),
    rgba(29, 173, 43, 0.8),
    rgba(20, 150, 30, 0.8)
  ) !important;
  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.3), 
              0 1px 1px rgba(29, 173, 43, 0.5),
              inset 0 1px 3px rgba(10, 80, 20, 0.6),
              inset 0 2px 3px 1px rgba(80, 220, 100, 0.6) !important;
}

/* Top shine effect for traffic lights */
:root[data-os-theme="macosx"] .title-bar button[aria-label="Close"]:before,
:root[data-os-theme="macosx"] .title-bar button[aria-label="Minimize"]:before,
:root[data-os-theme="macosx"] .title-bar button[aria-label="Maximize"]:before {
  content: "";
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  height: 33%;
  background: linear-gradient(
    rgba(255, 255, 255, 0.9),
    rgba(255, 255, 255, 0.3)
  );
  width: calc(100% - 2px);
  border-radius: 50% 50% 20% 20%;
  top: 1px;
  filter: blur(0.5px);
  z-index: 2;
  pointer-events: none;
}

/* Bottom glow effect for traffic lights */
:root[data-os-theme="macosx"] .title-bar button[aria-label="Close"]:after,
:root[data-os-theme="macosx"] .title-bar button[aria-label="Minimize"]:after,
:root[data-os-theme="macosx"] .title-bar button[aria-label="Maximize"]:after {
  content: "";
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  height: 33%;
  background: linear-gradient(
    rgba(255, 255, 255, 0.2),
    rgba(255, 255, 255, 0.5)
  );
  width: calc(100% - 3px);
  border-radius: 50%;
  bottom: 1px;
  filter: blur(1px);
  pointer-events: none;
}

/* Hover effects for traffic lights */
:root[data-os-theme="macosx"] .title-bar button[aria-label="Close"]:hover {
  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.3), 
              0 1px 1px rgba(225, 70, 64, 0.5),
              inset 0 1px 3px rgba(100, 20, 20, 0.6),
              inset 0 2px 3px 1px rgba(255, 120, 110, 0.6),
              0 0 3px rgba(255, 96, 87, 0.5) !important;
}

:root[data-os-theme="macosx"] .title-bar button[aria-label="Minimize"]:hover {
  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.3), 
              0 1px 1px rgba(223, 161, 35, 0.5),
              inset 0 1px 3px rgba(120, 80, 10, 0.6),
              inset 0 2px 3px 1px rgba(255, 210, 80, 0.6),
              0 0 3px rgba(255, 189, 46, 0.5) !important;
}

:root[data-os-theme="macosx"] .title-bar button[aria-label="Maximize"]:hover {
  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.3), 
              0 1px 1px rgba(29, 173, 43, 0.5),
              inset 0 1px 3px rgba(10, 80, 20, 0.6),
              inset 0 2px 3px 1px rgba(80, 220, 100, 0.6),
              0 0 3px rgba(39, 201, 63, 0.5) !important;
}

/* Inactive window traffic lights */
:root[data-os-theme="macosx"] .window:not(.is-foreground) .title-bar button[aria-label="Close"],
:root[data-os-theme="macosx"] .window:not(.is-foreground) .title-bar button[aria-label="Minimize"],
:root[data-os-theme="macosx"] .window:not(.is-foreground) .title-bar button[aria-label="Maximize"] {
  background: rgba(0, 0, 0, 0.14) !important;
  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.2) !important;
}

:root[data-os-theme="macosx"] .window:not(.is-foreground) .title-bar button[aria-label="Close"]:before,
:root[data-os-theme="macosx"] .window:not(.is-foreground) .title-bar button[aria-label="Minimize"]:before,
:root[data-os-theme="macosx"] .window:not(.is-foreground) .title-bar button[aria-label="Maximize"]:before,
:root[data-os-theme="macosx"] .window:not(.is-foreground) .title-bar button[aria-label="Close"]:after,
:root[data-os-theme="macosx"] .window:not(.is-foreground) .title-bar button[aria-label="Minimize"]:after,
:root[data-os-theme="macosx"] .window:not(.is-foreground) .title-bar button[aria-label="Maximize"]:after {
  display: none;
}

/* macOS Titlebar Border Styling */
:root[data-os-theme="macosx"] .title-bar {
  border: var(--os-metrics-titlebar-border-width) solid
    var(--os-color-titlebar-border) !important;
  border-bottom: var(--os-metrics-titlebar-border-width) solid
    var(--os-color-titlebar-border) !important;
}

/* Inactive window styling for macOS */
:root[data-os-theme="macosx"] .window:not(.is-foreground) .title-bar,
:root[data-os-theme="macosx"] .title-bar:not(.active) {
  border: var(--os-metrics-titlebar-border-width) solid
    var(--os-color-titlebar-border-inactive) !important;
  border-bottom: var(--os-metrics-titlebar-border-width) solid
    var(--os-color-titlebar-border-inactive) !important;
}

:root[data-os-theme="macosx"] .window {
  border: var(--os-metrics-border-width) solid var(--os-color-window-border) !important;
}

:root[data-os-theme="macosx"] .window:not(.is-foreground) {
  border: var(--os-metrics-border-width) solid
    var(--os-color-window-border-inactive) !important;
}

/* Shadow utilities */
.shadow-os-window {
  box-shadow: var(--os-window-shadow);
}

/* Preserve iPod fonts in macOS theme */
:root[data-os-theme="macosx"] .ipod-force-font {
  font-family: inherit !important;
  font-size: 16px !important; /* Reset base font size */
}

:root[data-os-theme="macosx"] .ipod-force-font * {
  font-family: inherit !important;
  font-size: unset !important; /* Reset macOS overrides */
}

/* Reset div and p font sizes within iPod */
:root[data-os-theme="macosx"] .ipod-force-font div,
:root[data-os-theme="macosx"] .ipod-force-font p {
  font-size: unset !important;
}

:root[data-os-theme="macosx"] .ipod-force-font .font-chicago,
:root[data-os-theme="macosx"] .font-chicago {
  font-family: "ChicagoKare", "ArkPixel", "SerenityOS-Emoji", system-ui,
    -apple-system, sans-serif !important;
  -webkit-font-smoothing: none !important;
  font-smooth: never !important;
}

/* Preserve Chicago font sizes */
:root[data-os-theme="macosx"] .ipod-force-font .font-chicago.text-xs {
  font-size: 0.75rem !important;
}

:root[data-os-theme="macosx"] .ipod-force-font .font-chicago.text-\[12px\] {
  font-size: 12px !important;
}

:root[data-os-theme="macosx"] .ipod-force-font .font-chicago.text-\[16px\] {
  font-size: 16px !important;
}

:root[data-os-theme="macosx"] .ipod-force-font .font-chicago.text-\[20px\] {
  font-size: 20px !important;
}

:root[data-os-theme="macosx"] .ipod-force-font .font-chicago.text-xl {
  font-size: 1.25rem !important;
}

/* Preserve responsive Chicago font sizes */
:root[data-os-theme="macosx"]
  .ipod-force-font
  .font-chicago.text-\[min\(5vw\,5vh\)\] {
  font-size: min(5vw, 5vh) !important;
}

:root[data-os-theme="macosx"] .ipod-force-font .font-geneva-12 {
  font-family: "Geneva-12", "ArkPixel", "SerenityOS-Emoji", system-ui,
    -apple-system, sans-serif !important;
  -webkit-font-smoothing: antialiased !important;
  font-smooth: always !important;
  font-size: 12px !important;
}

/* Outside iPod and Videos LCD, font-geneva-12 uses macOS system fonts */
:root[data-os-theme="macosx"]
  .font-geneva-12:not(.ipod-force-font .font-geneva-12):not(
    .videos-lcd .font-geneva-12
  ) {
  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
    "SF Pro Display", "SF Pro Text", sans-serif !important;
  -webkit-font-smoothing: antialiased !important;
  font-smooth: auto !important;
  font-size: 12px !important;
}

/* Preserve specific iPod font sizes */
:root[data-os-theme="macosx"] .ipod-force-font .text-xs {
  font-size: 0.75rem !important;
}

:root[data-os-theme="macosx"] .ipod-force-font .text-sm {
  font-size: 0.875rem !important;
}

:root[data-os-theme="macosx"] .ipod-force-font .text-base {
  font-size: 1rem !important;
}

:root[data-os-theme="macosx"] .ipod-force-font .text-lg {
  font-size: 1.125rem !important;
}

:root[data-os-theme="macosx"] .ipod-force-font .text-xl {
  font-size: 1.25rem !important;
}

:root[data-os-theme="macosx"] .ipod-force-font .text-2xl {
  font-size: 1.5rem !important;
}

:root[data-os-theme="macosx"] .ipod-force-font .text-3xl {
  font-size: 1.875rem !important;
}

/* Preserve specific pixel-based font sizes used in iPod */
:root[data-os-theme="macosx"] .ipod-force-font .text-\[12px\] {
  font-size: 12px !important;
}

:root[data-os-theme="macosx"] .ipod-force-font .text-\[16px\] {
  font-size: 16px !important;
}

:root[data-os-theme="macosx"] .ipod-force-font .text-\[18px\] {
  font-size: 18px !important;
}

:root[data-os-theme="macosx"] .ipod-force-font .text-\[20px\] {
  font-size: 20px !important;
}

:root[data-os-theme="macosx"] .ipod-force-font .text-\[24px\] {
  font-size: 24px !important;
}

/* macOS dropdown menu item hover/focus styles */
:root[data-os-theme="macosx"] [role="menuitem"]:focus,
:root[data-os-theme="macosx"] [role="menuitemcheckbox"]:focus,
:root[data-os-theme="macosx"] [role="menuitemradio"]:focus,
:root[data-os-theme="macosx"] [role="option"]:focus,
:root[data-os-theme="macosx"] [role="option"][data-highlighted] {
  background-color: #3067da !important;
  color: white !important;
  outline: none !important;
}

/* Override the 11px font size for dropdown menu items */
:root[data-os-theme="macosx"] [role="menuitem"],
:root[data-os-theme="macosx"] [role="menuitemcheckbox"],
:root[data-os-theme="macosx"] [role="menuitemradio"],
:root[data-os-theme="macosx"] [role="option"] {
  font-size: 13px !important;
}

/* Enhanced shadow for macOS foreground windows */
:root[data-os-theme="macosx"] .shadow-os-window.is-foreground {
  box-shadow: 0 12px 35px rgba(0, 0, 0, 0.6);
}

/* Lighter shadow for macOS background windows */
:root[data-os-theme="macosx"] .shadow-os-window:not(.is-foreground) {
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

/* macOS Theme Dialog Styling */
:root[data-os-theme="macosx"] .macosx-dialog {
  border-radius: 7.2px !important;
}

:root[data-os-theme="macosx"] .macosx-dialog-header {
  border-radius: 7.2px 7.2px 0px 0px !important;
}

/* macOS Aqua Tab Styles */
.aqua-tab {
  position: relative;
  border: 1px solid rgba(0, 0, 0, 0.3);
  border-radius: 6px 6px 0 0;
  transition: all 150ms;
  overflow: hidden;
  height: 28px;
  /* Inactive tab - shifted up from top */
  margin-top: 4px;
  /* Inactive tab (secondary aqua button style) */
  background: linear-gradient(rgba(248, 248, 248, 1), rgba(208, 208, 208, 1));
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1),
    inset 0 2px 3px 1px rgba(187, 187, 187, 0.8), 0 1px 1px rgba(0, 0, 0, 0.3);
  color: black;
  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.25);
  font-weight: 500 !important;
  font-size: 12px !important;
}

.aqua-tab:hover {
  background: linear-gradient(rgba(250, 250, 250, 1), rgba(212, 212, 212, 1));
}

.aqua-tab[data-state="active"] {
  /* Active tab - no position shift or extension */
  margin-top: 0;
  /* Active tab (primary aqua button style) */
  background: linear-gradient(
    rgba(100, 149, 237, 0.9),
    rgba(65, 105, 225, 0.9)
  );
  box-shadow: inset 0 1px 3px rgba(0, 17, 49, 0.8),
    inset 0 2px 3px 1px rgba(0, 78, 187, 0.75), 0 2px 3px rgba(0, 0, 0, 0.3),
    0 1px 1px rgba(0, 78, 187, 0.5);
  color: white !important;
  text-shadow: 0 1px 1px rgba(30, 77, 161, 0.5);
  border-bottom: none;
}

.aqua-tab:not([data-state="active"]) {
  font-weight: 400 !important;
}

/* Top shine for aqua tabs */
.aqua-tab:before {
  content: "";
  position: absolute;
  left: 2px;
  right: 2px;
  top: 2px;
  height: 35%;
  background: linear-gradient(
    rgba(255, 255, 255, 0.85),
    rgba(255, 255, 255, 0.25)
  );
  border-radius: 4px 4px 0 0;
  pointer-events: none;
  z-index: 10;
}

/* Bottom glow for aqua tabs */
.aqua-tab:after {
  content: "";
  position: absolute;
  left: 2px;
  right: 2px;
  bottom: 2px;
  height: 20%;
  background: linear-gradient(transparent, rgba(255, 255, 255, 0.35));
  border-radius: 0 0 2px 2px;
  pointer-events: none;
  z-index: 10;
}

/* Enhanced gloss for active state */
.aqua-tab[data-state="active"]:before {
  background: linear-gradient(
    rgba(255, 255, 255, 0.8),
    rgba(255, 255, 255, 0.35)
  );
}

.aqua-tab[data-state="active"]:after {
  background: linear-gradient(transparent, rgba(255, 255, 255, 0.45));
}

/* Aqua tab bar */
.aqua-tab-bar {
  background: linear-gradient(
    rgba(244, 244, 244, 1),
    rgba(232, 232, 232, 1)
  ) !important;
  border-bottom: 4px solid rgba(65, 105, 225, 0.9);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.4);
  position: relative;
  height: 28px !important;
  align-items: flex-end !important;
  justify-content: flex-start;
  /* Remove any default backgrounds */
  border-radius: 0 !important;
  padding-bottom: 0 !important;
}

.aqua-tab-bar:before {
  content: none !important;
  background: none !important;
  box-shadow: none !important;
}

.aqua-tab-bar:after {
  content: none !important;
  background: none !important;
  box-shadow: none !important;
}

/* Remove default Tabs background for macOS */
:root[data-os-theme="macosx"] [role="tablist"].aqua-tab-bar {
  background: transparent !important;
}

:root[data-os-theme="macosx"] [data-radix-tabs-root] {
  background: transparent !important;
}

/* Remove any white backgrounds from Tabs component */
:root[data-os-theme="macosx"] [data-radix-tabs-root] > * {
  background: transparent !important;
}

:root[data-os-theme="macosx"] [role="tablist"] {
  background: transparent !important;
}

/* Specifically target the TabsList component container */
:root[data-os-theme="macosx"] .aqua-tab-bar:not(.aqua-tab) {
  background: transparent !important;
}
