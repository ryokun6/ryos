<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TextEdit - ryOS Docs</title>
  <link rel="icon" href="/icons/mac-192.png">
  <style>
    @font-face { font-family: "Geneva"; src: url("/fonts/geneva-12.woff2") format("woff2"); }
    @font-face { font-family: "Monaco"; src: url("/fonts/monacottf.woff2") format("woff2"); }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: "Geneva", system-ui, sans-serif;
      font-size: 12px;
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      background: #fff;
      color: #000;
    }
    a { color: #00f; }
    a:hover { text-decoration: none; }
    code, pre { font-family: "Monaco", monospace; font-size: 11px; }
    code { background: #f0f0f0; padding: 1px 4px; }
    pre { background: #f8f8f8; border: 1px solid #ddd; padding: 12px; overflow-x: auto; margin: 12px 0; }
    pre code { background: none; padding: 0; }
    
    /* Layout */
    .header {
      position: sticky; top: 0; z-index: 10;
      background: #fff; border-bottom: 1px solid #ccc;
      padding: 0 16px; height: 40px;
      display: flex; align-items: center; justify-content: space-between;
    }
    .header-left { display: flex; align-items: center; gap: 8px; }
    .header-left img { width: 20px; height: 20px; display: block; }
    .header-left span { font-weight: bold; }
    .header-right { display: flex; align-items: center; gap: 16px; }
    .header-right a { text-decoration: none; color: #333; }
    .header-right a:hover { color: #000; }
    .header-right .github { display: flex; align-items: center; gap: 4px; }
    .header-right .launch { background: #000; color: #fff; padding: 4px 12px; }
    
    .container { display: flex; max-width: 1100px; margin: 0 auto; }
    
    .sidebar {
      width: 220px; flex-shrink: 0;
      border-right: 1px solid #ccc;
      padding: 12px;
      position: sticky; top: 40px;
      height: calc(100vh - 40px);
      overflow-y: auto;
    }
    .sidebar a {
      display: block; padding: 4px 8px; margin: 2px 0;
      text-decoration: none; color: #333;
      font-size: 11px;
    }
    .sidebar a:hover { background: #f0f0f0; }
    .sidebar a.active { background: #000; color: #fff; }
    
    /* Tree hierarchy styles */
    .nav-group { margin: 4px 0; }
    .nav-spacer { width: 8px; flex-shrink: 0; } /* Same width as toggle arrow */
    .nav-no-toggle { cursor: default; }
    .nav-toggle {
      display: flex; align-items: center; gap: 4px;
      background: none; border: none; padding: 0; width: 100%;
      cursor: pointer; text-align: left; font: inherit; color: inherit;
    }
    .nav-toggle:hover { background: #f0f0f0; }
    .nav-toggle svg { flex-shrink: 0; opacity: 0.6; transition: transform 0.2s; }
    .nav-toggle a { flex: 1; padding: 4px 8px; margin: 0; pointer-events: auto; font-size: 11px; }
    .nav-children { margin-left: 12px; overflow: hidden; transition: height 0.2s ease-out; }
    .nav-child { padding-left: 8px !important; font-size: 10px !important; color: #555 !important; }
    .nav-child:hover { color: #000 !important; }
    .nav-child.active { color: #fff !important; }
    
    .content { flex: 1; padding: 24px 32px; min-width: 0; }
    
    /* Typography */
    h1 { font-size: 18px; border-bottom: 1px solid #ccc; padding-bottom: 8px; margin-bottom: 16px; }
    hr { border: none; border-top: 1px solid #ccc; margin: 16px 0; }
    h2 { font-size: 14px; margin: 24px 0 12px; }
    h3 { font-size: 12px; margin: 16px 0 8px; }
    h4 { font-size: 11px; margin: 12px 0 6px; font-weight: bold; }
    p { margin: 8px 0; }
    ul, ol { margin: 8px 0 8px 20px; }
    li { margin: 4px 0; }
    
    /* Tables */
    table { width: 100%; border-collapse: collapse; margin: 12px 0; font-size: 11px; }
    th, td { border: 1px solid #ccc; padding: 6px 8px; text-align: left; }
    th { background: #f0f0f0; font-weight: bold; }
    
    /* Mermaid diagrams */
    pre.mermaid { background: none; border: none; padding: 0; text-align: center; margin: 16px 0; }
    .mermaid svg { max-width: 100%; height: auto; font-family: "Geneva", system-ui, sans-serif !important; }
    .mermaid .node rect, .mermaid .node circle, .mermaid .node polygon { fill: #f8f8f8 !important; stroke: #ccc !important; }
    .mermaid .edgeLabel { background: #fff !important; font-size: 10px !important; }
    .mermaid .label { font-size: 10px !important; }
    .mermaid .nodeLabel { font-size: 10px !important; }
    .mermaid .cluster-label { font-size: 10px !important; }
    .mermaid .messageText { font-size: 10px !important; }
    .mermaid .actor { font-size: 10px !important; }
    .mermaid .labelText { font-size: 10px !important; }
    
    /* Collapsible details */
    details { margin: 8px 0; }
    details summary { 
      cursor: pointer; 
      color: #666; 
      font-size: 11px;
      padding: 4px 0;
      user-select: none;
    }
    details summary:hover { color: #000; }
    details[open] summary { margin-bottom: 8px; }
    details ul { margin-top: 0; }
    
    /* Navigation */
    .nav { display: flex; justify-content: space-between; margin-top: 32px; padding-top: 16px; border-top: 1px solid #ccc; }
    .nav a { text-decoration: none; color: #333; }
    .nav a:hover { color: #000; }
    
    /* Mobile menu button */
    .menu-btn { 
      display: none; 
      background: transparent; 
      border: 0; 
      padding: 4px; 
      cursor: pointer; 
      line-height: 1;
      -webkit-appearance: none;
      appearance: none;
      margin: 0;
      color: inherit;
    }
    .menu-btn svg { display: block; width: 18px; height: 18px; pointer-events: none; }
    @media screen and (max-width: 768px) {
      .menu-btn { 
        display: -webkit-flex !important;
        display: flex !important; 
        -webkit-align-items: center;
        align-items: center; 
        -webkit-justify-content: center;
        justify-content: center;
      }
      .header-left img { display: none !important; }
      .sidebar { 
        position: fixed; left: -240px; top: 40px; 
        width: 240px; height: calc(100vh - 40px);
        background: #fff; z-index: 20;
        transition: left 0.2s;
      }
      .sidebar.open { left: 0; box-shadow: 2px 0 8px rgba(0,0,0,0.1); }
      .content { padding: 16px; }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-left">
      <button class="menu-btn" onclick="document.querySelector('.sidebar').classList.toggle('open')">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12h18M3 6h18M3 18h18"/></svg>
      </button>
      <a href="/" style="display:flex;align-items:center;gap:8px;text-decoration:none;color:inherit">
        <img src="/icons/mac-192.png" alt="ryOS" width="20" height="20">
        <span>ryOS</span>
      </a>
      <span style="color:#999">/</span>
      <span style="color:#666">Docs</span>
    </div>
    <div class="header-right">
      <a href="https://github.com/ryokun6/ryos" target="_blank" class="github">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
        GitHub
      </a>
      <a href="/" class="launch">Launch</a>
    </div>
  </header>
  
  <div class="container">
    <nav class="sidebar">
      <div class="nav-group ">
  <button class="nav-toggle" onclick="toggleNavGroup(this)" aria-expanded="false">
    <svg width="8" height="8" viewBox="0 0 8 8" fill="currentColor" style="transition: transform 0.2s; transform: rotate(0deg);">
      <path d="M2 0v8l4-4z"/>
    </svg>
    <a href="/docs/overview" class="">1. Overview</a>
  </button>
  <div class="nav-children" style="display: none;">
    <a href="/docs/architecture" class="nav-child ">1.1 Architecture & Build</a>
    <a href="/docs/api-architecture" class="nav-child ">1.2 API Architecture</a>
  </div>
</div>
<div class="nav-group expanded">
  <button class="nav-toggle" onclick="toggleNavGroup(this)" aria-expanded="true">
    <svg width="8" height="8" viewBox="0 0 8 8" fill="currentColor" style="transition: transform 0.2s; transform: rotate(90deg);">
      <path d="M2 0v8l4-4z"/>
    </svg>
    <a href="/docs/apps" class="">2. Apps</a>
  </button>
  <div class="nav-children" style="display: block;">
    <a href="/docs/chats" class="nav-child ">2.1 Chats</a>
    <a href="/docs/internet-explorer" class="nav-child ">2.2 Internet Explorer</a>
    <a href="/docs/ipod" class="nav-child ">2.3 iPod</a>
    <a href="/docs/karaoke" class="nav-child ">2.4 Karaoke</a>
    <a href="/docs/textedit" class="nav-child active">2.5 TextEdit</a>
    <a href="/docs/finder" class="nav-child ">2.6 Finder</a>
    <a href="/docs/paint" class="nav-child ">2.7 Paint</a>
    <a href="/docs/photo-booth" class="nav-child ">2.8 Photo Booth</a>
    <a href="/docs/terminal" class="nav-child ">2.9 Terminal</a>
    <a href="/docs/control-panels" class="nav-child ">2.10 Control Panels</a>
    <a href="/docs/soundboard" class="nav-child ">2.11 Soundboard</a>
    <a href="/docs/synth" class="nav-child ">2.12 Synth</a>
    <a href="/docs/videos" class="nav-child ">2.13 Videos</a>
    <a href="/docs/minesweeper" class="nav-child ">2.14 Minesweeper</a>
    <a href="/docs/virtual-pc" class="nav-child ">2.15 Virtual PC</a>
    <a href="/docs/admin" class="nav-child ">2.16 Admin</a>
    <a href="/docs/applet-store" class="nav-child ">2.17 Applet Store</a>
    <a href="/docs/stickies" class="nav-child ">2.18 Stickies</a>
    <a href="/docs/infinite-mac" class="nav-child ">2.19 Infinite Mac</a>
  </div>
</div>
<div class="nav-group ">
  <button class="nav-toggle" onclick="toggleNavGroup(this)" aria-expanded="false">
    <svg width="8" height="8" viewBox="0 0 8 8" fill="currentColor" style="transition: transform 0.2s; transform: rotate(0deg);">
      <path d="M2 0v8l4-4z"/>
    </svg>
    <a href="/docs/application-framework" class="">3. Application Framework</a>
  </button>
  <div class="nav-children" style="display: none;">
    <a href="/docs/window-management" class="nav-child ">3.1 Window Management</a>
    <a href="/docs/state-management" class="nav-child ">3.2 State Management</a>
    <a href="/docs/theme-system" class="nav-child ">3.3 Theme System</a>
    <a href="/docs/hooks-architecture" class="nav-child ">3.4 Hooks Architecture</a>
    <a href="/docs/component-architecture" class="nav-child ">3.5 Component Architecture</a>
  </div>
</div>
<div class="nav-group">
  <div class="nav-toggle nav-no-toggle">
    <span class="nav-spacer"></span>
    <a href="/docs/ai-system" class="">4. AI System</a>
  </div>
</div>
<div class="nav-group">
  <div class="nav-toggle nav-no-toggle">
    <span class="nav-spacer"></span>
    <a href="/docs/file-system" class="">5. File System</a>
  </div>
</div>
<div class="nav-group">
  <div class="nav-toggle nav-no-toggle">
    <span class="nav-spacer"></span>
    <a href="/docs/audio-system" class="">6. Audio System</a>
  </div>
</div>
<div class="nav-group ">
  <button class="nav-toggle" onclick="toggleNavGroup(this)" aria-expanded="false">
    <svg width="8" height="8" viewBox="0 0 8 8" fill="currentColor" style="transition: transform 0.2s; transform: rotate(0deg);">
      <path d="M2 0v8l4-4z"/>
    </svg>
    <a href="/docs/ui-components" class="">7. UI Components and Shared Systems</a>
  </button>
  <div class="nav-children" style="display: none;">
    <a href="/docs/component-library" class="nav-child ">7.1 Components</a>
    <a href="/docs/i18n" class="nav-child ">7.2 i18n & Hooks</a>
  </div>
</div>
<div class="nav-group ">
  <button class="nav-toggle" onclick="toggleNavGroup(this)" aria-expanded="false">
    <svg width="8" height="8" viewBox="0 0 8 8" fill="currentColor" style="transition: transform 0.2s; transform: rotate(0deg);">
      <path d="M2 0v8l4-4z"/>
    </svg>
    <a href="/docs/api-reference" class="">8. API Reference</a>
  </button>
  <div class="nav-children" style="display: none;">
    <a href="/docs/chat-api" class="nav-child ">8.1 Chat API</a>
    <a href="/docs/song-api" class="nav-child ">8.2 Song API</a>
    <a href="/docs/media-api" class="nav-child ">8.3 Media API</a>
    <a href="/docs/auth-api" class="nav-child ">8.4 Auth API</a>
    <a href="/docs/rooms-api" class="nav-child ">8.5 Rooms API</a>
    <a href="/docs/messages-api" class="nav-child ">8.6 Messages API</a>
    <a href="/docs/presence-api" class="nav-child ">8.7 Presence API</a>
    <a href="/docs/ai-generation-apis" class="nav-child ">8.8 AI Endpoints</a>
    <a href="/docs/utility-apis" class="nav-child ">8.9 Utility APIs</a>
    <a href="/docs/api-design-guide" class="nav-child ">8.10 ryOS API Design Guide</a>
  </div>
</div>
<div class="nav-group">
  <div class="nav-toggle nav-no-toggle">
    <span class="nav-spacer"></span>
    <a href="/docs/changelog" class="">9. Changelog</a>
  </div>
</div>
    </nav>
    
    <main class="content">
      <article>
        <h1>TextEdit</h1>
<p>TextEdit is a versatile rich text editor for ryOS, designed for creating and managing documents with advanced formatting, markdown support, and innovative features like speech-to-text integration. It provides a powerful and intuitive platform for all your document creation needs.</p>
<h2>Overview</h2>
<p>TextEdit serves as the primary application for text-based content creation within the ryOS environment. It offers a robust set of tools for crafting professional-looking documents, from simple notes to complex reports. The editor supports a wide range of formatting options, making it accessible for general users while also catering to developers and writers with its comprehensive markdown support.</p>
<p>The application is engineered for enhanced productivity, featuring hands-free voice dictation for efficient input and context-aware slash commands for rapid formatting and content insertion. TextEdit facilitates seamless workflow by supporting various file formats for both import and export, ensuring compatibility and ease of sharing across different platforms and applications.</p>
<h2>Features</h2>
<ul><li><strong>Core Editing & Formatting:</strong><ul><li>Standard text manipulation: Type, copy, cut, paste, undo, and redo operations.</li><li>Rich formatting options: Apply bold, italic, underline styles, choose from multiple heading levels, and adjust text alignment.</li><li>Structured content creation: Easily create bulleted lists, numbered lists, and interactive checkbox task lists.</li></ul></li></ul><ul><li><strong>File Management:</strong><ul><li>Comprehensive document operations: Create new files, open existing documents, and save changes to your work.</li><li>Versatile export capabilities: Save your documents in various formats including HTML, Markdown (MD), and plain text (TXT) for broad compatibility.</li></ul></li><li><strong>Advanced Interaction:</strong><ul><li><strong>Voice Dictation:</strong> Seamlessly convert spoken words into text directly within your document, offering a convenient hands-free input method.</li><li><strong>Slash Commands:</strong> Access quick formatting and content insertion options by typing a forward slash (<code>/</code>) followed by a command (e.g., <code>/heading</code>, <code>/list</code>, <code>/bold</code>).</li></ul></li></ul>
<h2>User Guide</h2>
<h3>Getting Started</h3>
To launch TextEdit, simply click its icon in the ryOS application launcher. A new, blank document will open automatically, ready for you to begin typing. You can start creating your content immediately or use the "File" menu to open an existing document.
<h3>Key Actions</h3>
<ul><li><strong>Basic Text Entry & Manipulation:</strong> Type directly into the editor pane. Use standard keyboard shortcuts (e.g., <code>Ctrl/Cmd+C</code> for copy, <code>Ctrl/Cmd+X</code> for cut, <code>Ctrl/Cmd+V</code> for paste, <code>Ctrl/Cmd+Z</code> for undo, <code>Ctrl/Cmd+Y</code> for redo) for common text operations.</li><li><strong>Applying Formatting:</strong> Utilize the intuitive toolbar located at the top of the editor to apply text styles like bold, italic, or underline, select heading levels, or adjust text alignment.</li><li><strong>Creating Lists:</strong> Click the respective icons in the toolbar to effortlessly create bulleted lists, numbered lists, or interactive checkbox task lists.</li><li><strong>Saving and Opening Files:</strong> Access the "File" menu in the menubar to save your current document, save it under a new name, or open an existing file from your ryOS file system.</li><li><strong>Exporting Documents:</strong> From the "File" menu, choose the "Export" option to save your document in different formats such as HTML, Markdown, or plain text, catering to various sharing and usage needs.</li><li><strong>Voice Dictation:</strong> Click the microphone icon (typically found in the toolbar or menubar) to initiate voice dictation. Speak clearly, and your words will be transcribed directly into your document. Click the icon again to stop dictation.</li><li><strong>Using Slash Commands:</strong> Type a forward slash (<code>/</code>) anywhere within your document to reveal a context-sensitive list of quick commands. Select a command (e.g., <code>/h1</code> for a Heading 1, <code>/bullet list</code> for a bullet point) to instantly apply formatting or insert specific elements.</li></ul>
<h3>Tips & Shortcuts</h3>
<ul><li><strong>Drag and Drop:</strong> TextEdit supports dragging text snippets within the editor for easy reordering. You can often also drag supported file types from the ryOS Files app directly into TextEdit to open them.</li><li><strong>Markdown Shorthand:</strong> Leverage TextEdit's markdown capabilities by typing common markdown syntax. For example, <code># My Heading</code> followed by Enter will create a Heading 1, and <code>* item</code> will create a bullet point.</li><li><strong>Contextual Menus:</strong> Right-clicking on selected text or within the editor can reveal additional formatting and editing options specific to the context.</li></ul>
<h2>Technical Details</h2>
<h3>Window Configuration</h3>
<ul><li>Default size: 430×475px</li><li>Minimum size: 430×200px</li></ul>
<h3>Component Architecture</h3>
The app consists of 8 component file(s):
<ul><li><code><a href="https://github.com/ryokun6/ryos/blob/main/src/apps/textedit/components/SpeechManager.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/textedit/components/SpeechManager.tsx</a></code></li></ul><ul><li><code><a href="https://github.com/ryokun6/ryos/blob/main/src/apps/textedit/components/TextEditAppComponent.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/textedit/components/TextEditAppComponent.tsx</a></code></li><li><code><a href="https://github.com/ryokun6/ryos/blob/main/src/apps/textedit/components/TextEditor.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/textedit/components/TextEditor.tsx</a></code></li><li><code><a href="https://github.com/ryokun6/ryos/blob/main/src/apps/textedit/components/TextEditMenuBar.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/textedit/components/TextEditMenuBar.tsx</a></code></li><li><code><a href="https://github.com/ryokun6/ryos/blob/main/src/apps/textedit/components/EditorToolbar.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/textedit/components/EditorToolbar.tsx</a></code></li><li><code><a href="https://github.com/ryokun6/ryos/blob/main/src/apps/textedit/components/SlashCommandsList.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/textedit/components/SlashCommandsList.tsx</a></code></li><li><code><a href="https://github.com/ryokun6/ryos/blob/main/src/apps/textedit/components/EditorProvider.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/textedit/components/EditorProvider.tsx</a></code></li><li><code><a href="https://github.com/ryokun6/ryos/blob/main/src/apps/textedit/components/DialogManager.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/textedit/components/DialogManager.tsx</a></code></li></ul>
<h3>Hooks & Utilities</h3>
<strong>Custom Hooks:</strong>
<ul><li><code><a href="https://github.com/ryokun6/ryos/blob/main/src/apps/textedit/hooks/useDragAndDrop.ts" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/textedit/hooks/useDragAndDrop.ts</a></code></li><li><code><a href="https://github.com/ryokun6/ryos/blob/main/src/apps/textedit/hooks/useFileOperations.ts" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/textedit/hooks/useFileOperations.ts</a></code></li><li><code><a href="https://github.com/ryokun6/ryos/blob/main/src/apps/textedit/hooks/useTextEditState.ts" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/textedit/hooks/useTextEditState.ts</a></code></li></ul>
<strong>Utilities:</strong>
<ul><li><code><a href="https://github.com/ryokun6/ryos/blob/main/src/apps/textedit/utils/textEditUtils.ts" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/textedit/utils/textEditUtils.ts</a></code></li></ul>
<h3>State Management</h3>
TextEdit primarily manages its complex rich text editor state locally within the <code>TextEditor</code> component, leveraging a robust editor framework. The <code>EditorProvider.tsx</code> component likely provides the editor instance and its associated state to various child components throughout the application, ensuring consistent access and interaction. Additionally, the <code>useTextEditState</code> hook suggests the management of application-wide settings, document-specific properties like file status, and UI configurations, typically handled through React's local state mechanisms and potentially context for broader app scope.
<h2>Related Apps</h2>
<p>TextEdit works seamlessly with the <strong>Files</strong> app for organizing, browsing, and retrieving your documents. For quick, less formal text snippets or temporary notes, the <strong>Notes</strong> app can serve as a complementary tool.</p>
      </article>
      
      <nav class="nav">
        <a href="/docs/karaoke">← Karaoke</a>
        <a href="/docs/finder">Finder →</a>
      </nav>
      
    </main>
  </div>
  
  <script>
    function toggleNavGroup(button) {
      const group = button.closest('.nav-group');
      const children = group.querySelector('.nav-children');
      const svg = button.querySelector('svg');
      const isExpanded = group.classList.contains('expanded');
      
      if (isExpanded) {
        group.classList.remove('expanded');
        children.style.display = 'none';
        svg.style.transform = 'rotate(0deg)';
        button.setAttribute('aria-expanded', 'false');
      } else {
        group.classList.add('expanded');
        children.style.display = 'block';
        svg.style.transform = 'rotate(90deg)';
        button.setAttribute('aria-expanded', 'true');
      }
    }
    
    document.addEventListener('click', (e) => {
      const sidebar = document.querySelector('.sidebar');
      const menuBtn = document.querySelector('.menu-btn');
      const clickedMenuBtn = menuBtn && menuBtn.contains(e.target);
      if (sidebar.classList.contains('open') && !sidebar.contains(e.target) && !clickedMenuBtn) {
        sidebar.classList.remove('open');
      }
    });
  </script>
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
    mermaid.initialize({
      startOnLoad: true,
      theme: 'base',
      securityLevel: 'loose',
      themeVariables: {
        fontFamily: '"Geneva", system-ui, sans-serif',
        fontSize: '10px',
        primaryColor: '#f0f0f0',
        primaryBorderColor: '#ccc',
        primaryTextColor: '#000',
        lineColor: '#666',
        secondaryColor: '#f8f8f8',
        tertiaryColor: '#fff'
      },
      flowchart: { curve: 'basis', padding: 8, nodeSpacing: 30, rankSpacing: 30 },
      sequence: { actorFontSize: 10, messageFontSize: 10, noteFontSize: 10 }
    });
  </script>
</body>
</html>