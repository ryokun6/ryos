{
  "applets": [
    {
      "name": "Weather.app",
      "path": "/Applets/Weather.app",
      "isDirectory": false,
      "type": "html",
      "icon": "üå§Ô∏è",
      "status": "active",
      "shareId": "356e97a80449c725c07a91c4dd07fb87",
      "content": "<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  \n  <link rel=\"stylesheet\" href=\"/fonts/fonts.css\">\n  <!-- ts=1762279831615 --> \n  \n  <script type=\"module\" src=\"https://cdnjs.cloudflare.com/ajax/libs/three.js/0.174.0/three.module.min.js\"></script>\n  <script src=\"https://cdn.tailwindcss.com/3.4.16\"></script>\n  <script>\n    tailwind.config = {\n      theme: {\n        extend: {\n          fontFamily: {\n            sans: [\"Geneva-12\", \"ArkPixel\", \"SerenityOS-Emoji\", \"sans-serif\"],\n            mono: [\"Monaco\", \"ArkPixel\", \"SerenityOS-Emoji\", \"ui-monospace\", \"SFMono-Regular\", \"Menlo\", \"Monaco\", \"Consolas\", \"Liberation Mono\", \"Courier New\", \"monospace\"],\n            serif: [\"Mondwest\", \"Yu Mincho\", \"Hiragino Mincho Pro\", \"Georgia\", \"Palatino\", \"SerenityOS-Emoji\", \"serif\"],\n            emoji: [\"SerenityOS-Emoji\", \"AppleColorEmoji\", \"AppleColorEmojiFallback\"],\n            'geneva': [\"Geneva-12\", \"ArkPixel\", \"SerenityOS-Emoji\", \"system-ui\", \"-apple-system\", \"sans-serif\"],\n            'mondwest': [\"Mondwest\", \"Yu Mincho\", \"Hiragino Mincho Pro\", \"Georgia\", \"Palatino\", \"Yu Mincho\", \"Hiragino Mincho Pro\", \"serif\"],\n            'neuebit': [\"NeueBit\", \"ArkPixel\", \"SerenityOS-Emoji\", \"Helvetica\", \"Arial\", \"Hiragino Sans\", \"sans-serif\"],\n            'monaco': [\"Monaco\", \"ArkPixel\", \"SerenityOS-Emoji\", \"monospace\"],\n            'jacquard': [\"Jacquard\", \"Yu Mincho\", \"Hiragino Mincho Pro\", \"Georgia\", \"Palatino\", \"serif\"]\n          }\n        }\n      }\n    }\n  </script>\n  <style>\n    * {\n      box-sizing: border-box;\n      \n    }\n    html, body {\n      margin: 0;\n      overflow-x: auto; /* Allow horizontal scroll if content overflows */\n      width: 100%;\n      height: 100%;\n      max-width: 100%; /* Prevent body from exceeding viewport width */\n      \n    }\n    \n    /* Ensure pre doesn't break layout */\n    pre {\n      white-space: pre-wrap; /* Allow wrapping */\n      word-break: break-all; /* Break long words */\n    }\n  </style>\n  \n  <!-- Move click interceptor script to head for earlier execution -->\n  <script>\n    document.addEventListener('DOMContentLoaded', function() {\n      document.addEventListener('click', function(event) {\n        var targetElement = event.target.closest('a');\n        // Only intercept if it's a valid link and NOT inside the draggable toolbar\n        if (targetElement && targetElement.href && !targetElement.closest('[data-drag-controls]')) {\n          event.preventDefault();\n          event.stopPropagation();\n          try {\n            // Resolve relative URLs against the document's base URI (if set) or window location\n            const absoluteUrl = new URL(targetElement.getAttribute('href'), document.baseURI || window.location.href).href;\n            // Use a specific message type for AI HTML navigation\n            window.parent.postMessage({ type: 'aiHtmlNavigation', url: absoluteUrl }, '*');\n            console.log('Intercepted link click:', absoluteUrl);\n          } catch (e) { console.error(\"Error resolving/posting URL:\", e); }\n        }\n      }, true); // Use capture phase to intercept early\n    });\n    \n    // Also add immediate execution version for documents that load quickly\n    // This helps ensure we don't miss any clicks during initial page load\n    (function() {\n      document.addEventListener('click', function(event) {\n        var targetElement = event.target.closest('a');\n        // Only intercept if it's a valid link and NOT inside the draggable toolbar\n        if (targetElement && targetElement.href && !targetElement.closest('[data-drag-controls]')) {\n          event.preventDefault();\n          event.stopPropagation();\n          try {\n            // Resolve relative URLs against the document's base URI (if set) or window location\n            const absoluteUrl = new URL(targetElement.getAttribute('href'), document.baseURI || window.location.href).href;\n            // Use a specific message type for AI HTML navigation\n            window.parent.postMessage({ type: 'aiHtmlNavigation', url: absoluteUrl }, '*');\n            console.log('Intercepted link click (immediate handler):', absoluteUrl);\n          } catch (e) { console.error(\"Error resolving/posting URL:\", e); }\n        }\n      }, true); // Use capture phase to intercept early\n    })();\n  </script>\n \n</head>\n<body>\n  <div class=\"w-full min-h-screen bg-white font-geneva p-4\">\n  <select id=\"citySelect\" class=\"w-full px-3 py-2 bg-gray-100 rounded-lg text-sm text-gray-900 border-none outline-none mb-6\">\n    <option value=\"San Francisco\">San Francisco</option>\n    <option value=\"New York\">New York</option>\n    <option value=\"London\">London</option>\n    <option value=\"Tokyo\">Tokyo</option>\n    <option value=\"Paris\">Paris</option>\n    <option value=\"Seoul\">Seoul</option>\n    <option value=\"Shanghai\">Shanghai</option>\n    <option value=\"Montreal\">Montreal</option>\n  </select>\n\n  <div class=\"text-center mb-6\">\n    <div class=\"text-6xl mb-3\" id=\"weatherIcon\">üå§Ô∏è</div>\n    <div class=\"flex items-baseline justify-center gap-2 mb-2\">\n      <span class=\"text-5xl text-gray-900\" id=\"temp\">--</span>\n      <button id=\"unitToggle\" class=\"text-xl text-gray-400\">¬∞F</button>\n    </div>\n    <div class=\"text-lg text-gray-600\" id=\"description\">Loading...</div>\n  </div>\n\n  <div class=\"bg-gray-50 rounded-lg p-3\">\n    <div class=\"grid grid-cols-2 gap-3 text-sm\">\n      <div>\n        <div class=\"text-gray-500 text-xs\">Wind</div>\n        <div class=\"text-gray-900\" id=\"wind\">--</div>\n      </div>\n      <div>\n        <div class=\"text-gray-500 text-xs\">Humidity</div>\n        <div class=\"text-gray-900\" id=\"humidity\">--</div>\n      </div>\n      <div>\n        <div class=\"text-gray-500 text-xs\">Feels Like</div>\n        <div class=\"text-gray-900\" id=\"feelsLike\">--</div>\n      </div>\n      <div>\n        <div class=\"text-gray-500 text-xs\">Pressure</div>\n        <div class=\"text-gray-900\" id=\"pressure\">--</div>\n      </div>\n    </div>\n  </div>\n\n  <div id=\"error\" class=\"hidden mt-4 bg-red-50 text-red-600 px-3 py-2 rounded-lg text-sm\"></div>\n</div>\n\n<script>\nconst citySelect = document.getElementById('citySelect');\nconst unitToggle = document.getElementById('unitToggle');\nconst weatherIcon = document.getElementById('weatherIcon');\nconst temp = document.getElementById('temp');\nconst description = document.getElementById('description');\nconst feelsLike = document.getElementById('feelsLike');\nconst humidity = document.getElementById('humidity');\nconst wind = document.getElementById('wind');\nconst pressure = document.getElementById('pressure');\nconst error = document.getElementById('error');\n\nlet data = null;\nlet celsius = false;\n\nfunction emoji(code) {\n  if (code === 0) return '‚òÄÔ∏è';\n  if (code <= 3) return '‚õÖ';\n  if (code <= 48) return 'üå´Ô∏è';\n  if (code <= 67) return 'üåßÔ∏è';\n  if (code <= 77) return 'üå®Ô∏è';\n  if (code <= 82) return 'üåßÔ∏è';\n  if (code <= 86) return 'üå®Ô∏è';\n  if (code <= 99) return '‚õàÔ∏è';\n  return 'üå§Ô∏è';\n}\n\nfunction desc(code) {\n  if (code === 0) return 'Clear';\n  if (code <= 3) return 'Partly Cloudy';\n  if (code <= 48) return 'Foggy';\n  if (code <= 67) return 'Rainy';\n  if (code <= 77) return 'Snowy';\n  if (code <= 82) return 'Rain Showers';\n  if (code <= 86) return 'Snow Showers';\n  if (code <= 99) return 'Thunderstorm';\n  return 'Unknown';\n}\n\nfunction toC(f) {\n  return (f - 32) * 5 / 9;\n}\n\nfunction update() {\n  if (!data) return;\n  const c = data.current;\n  const t = celsius ? toC(c.temperature_2m) : c.temperature_2m;\n  const f = celsius ? toC(c.apparent_temperature) : c.apparent_temperature;\n  \n  weatherIcon.textContent = emoji(c.weather_code);\n  temp.textContent = `${Math.round(t)}¬∞`;\n  description.textContent = desc(c.weather_code);\n  feelsLike.textContent = `${Math.round(f)}¬∞`;\n  humidity.textContent = `${c.relative_humidity_2m}%`;\n  wind.textContent = `${Math.round(c.wind_speed_10m)} mph`;\n  pressure.textContent = `${Math.round(c.surface_pressure)} hPa`;\n  unitToggle.textContent = celsius ? '¬∞C' : '¬∞F';\n}\n\nasync function getCoords(city) {\n  const res = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(city)}&count=1`);\n  const d = await res.json();\n  if (!d.results || !d.results.length) throw new Error('City not found');\n  return d.results[0];\n}\n\nasync function getWeather(lat, lon) {\n  const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,relative_humidity_2m,apparent_temperature,weather_code,wind_speed_10m,surface_pressure&temperature_unit=fahrenheit&wind_speed_unit=mph`);\n  return await res.json();\n}\n\nasync function load(city) {\n  error.classList.add('hidden');\n  try {\n    const loc = await getCoords(city);\n    data = await getWeather(loc.latitude, loc.longitude);\n    update();\n  } catch (e) {\n    error.textContent = e.message;\n    error.classList.remove('hidden');\n  }\n}\n\nunitToggle.addEventListener('click', () => {\n  celsius = !celsius;\n  update();\n});\n\ncitySelect.addEventListener('change', () => load(citySelect.value));\n\nload('San Francisco');\n</script>\n</body>\n</html>"
    },
    {
      "name": "Currency Converter.app",
      "path": "/Applets/Currency Converter.app",
      "isDirectory": false,
      "type": "html",
      "icon": "üí±",
      "status": "active",
      "shareId": "87bf95afdf1dd4187c317baa3fdd1bf2",
      "content": "<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  \n  <link rel=\"stylesheet\" href=\"/fonts/fonts.css\">\n  <!-- ts=1762279896676 --> \n  \n  <script type=\"module\" src=\"https://cdnjs.cloudflare.com/ajax/libs/three.js/0.174.0/three.module.min.js\"></script>\n  <script src=\"https://cdn.tailwindcss.com/3.4.16\"></script>\n  <script>\n    tailwind.config = {\n      theme: {\n        extend: {\n          fontFamily: {\n            sans: [\"Geneva-12\", \"ArkPixel\", \"SerenityOS-Emoji\", \"sans-serif\"],\n            mono: [\"Monaco\", \"ArkPixel\", \"SerenityOS-Emoji\", \"ui-monospace\", \"SFMono-Regular\", \"Menlo\", \"Monaco\", \"Consolas\", \"Liberation Mono\", \"Courier New\", \"monospace\"],\n            serif: [\"Mondwest\", \"Yu Mincho\", \"Hiragino Mincho Pro\", \"Georgia\", \"Palatino\", \"SerenityOS-Emoji\", \"serif\"],\n            emoji: [\"SerenityOS-Emoji\", \"AppleColorEmoji\", \"AppleColorEmojiFallback\"],\n            'geneva': [\"Geneva-12\", \"ArkPixel\", \"SerenityOS-Emoji\", \"system-ui\", \"-apple-system\", \"sans-serif\"],\n            'mondwest': [\"Mondwest\", \"Yu Mincho\", \"Hiragino Mincho Pro\", \"Georgia\", \"Palatino\", \"Yu Mincho\", \"Hiragino Mincho Pro\", \"serif\"],\n            'neuebit': [\"NeueBit\", \"ArkPixel\", \"SerenityOS-Emoji\", \"Helvetica\", \"Arial\", \"Hiragino Sans\", \"sans-serif\"],\n            'monaco': [\"Monaco\", \"ArkPixel\", \"SerenityOS-Emoji\", \"monospace\"],\n            'jacquard': [\"Jacquard\", \"Yu Mincho\", \"Hiragino Mincho Pro\", \"Georgia\", \"Palatino\", \"serif\"]\n          }\n        }\n      }\n    }\n  </script>\n  <style>\n    * {\n      box-sizing: border-box;\n      \n    }\n    html, body {\n      margin: 0;\n      overflow-x: auto; /* Allow horizontal scroll if content overflows */\n      width: 100%;\n      height: 100%;\n      max-width: 100%; /* Prevent body from exceeding viewport width */\n      \n    }\n    \n    /* Ensure pre doesn't break layout */\n    pre {\n      white-space: pre-wrap; /* Allow wrapping */\n      word-break: break-all; /* Break long words */\n    }\n  </style>\n  \n  <!-- Move click interceptor script to head for earlier execution -->\n  <script>\n    document.addEventListener('DOMContentLoaded', function() {\n      document.addEventListener('click', function(event) {\n        var targetElement = event.target.closest('a');\n        // Only intercept if it's a valid link and NOT inside the draggable toolbar\n        if (targetElement && targetElement.href && !targetElement.closest('[data-drag-controls]')) {\n          event.preventDefault();\n          event.stopPropagation();\n          try {\n            // Resolve relative URLs against the document's base URI (if set) or window location\n            const absoluteUrl = new URL(targetElement.getAttribute('href'), document.baseURI || window.location.href).href;\n            // Use a specific message type for AI HTML navigation\n            window.parent.postMessage({ type: 'aiHtmlNavigation', url: absoluteUrl }, '*');\n            console.log('Intercepted link click:', absoluteUrl);\n          } catch (e) { console.error(\"Error resolving/posting URL:\", e); }\n        }\n      }, true); // Use capture phase to intercept early\n    });\n    \n    // Also add immediate execution version for documents that load quickly\n    // This helps ensure we don't miss any clicks during initial page load\n    (function() {\n      document.addEventListener('click', function(event) {\n        var targetElement = event.target.closest('a');\n        // Only intercept if it's a valid link and NOT inside the draggable toolbar\n        if (targetElement && targetElement.href && !targetElement.closest('[data-drag-controls]')) {\n          event.preventDefault();\n          event.stopPropagation();\n          try {\n            // Resolve relative URLs against the document's base URI (if set) or window location\n            const absoluteUrl = new URL(targetElement.getAttribute('href'), document.baseURI || window.location.href).href;\n            // Use a specific message type for AI HTML navigation\n            window.parent.postMessage({ type: 'aiHtmlNavigation', url: absoluteUrl }, '*');\n            console.log('Intercepted link click (immediate handler):', absoluteUrl);\n          } catch (e) { console.error(\"Error resolving/posting URL:\", e); }\n        }\n      }, true); // Use capture phase to intercept early\n    })();\n  </script>\n \n</head>\n<body>\n  <div class=\"w-full min-h-screen bg-white font-geneva p-4\">\n  <div class=\"space-y-4\">\n    <div class=\"bg-white border border-neutral-200 rounded-lg overflow-hidden\">\n      <input type=\"number\" id=\"amount\" value=\"1\" class=\"w-full px-4 py-3 text-2xl text-neutral-800 focus:outline-none\" placeholder=\"0\" />\n      <div class=\"border-t border-neutral-200\">\n        <select id=\"from\" class=\"w-full px-4 py-3 bg-white text-neutral-600 focus:outline-none appearance-none\">\n          <option value=\"USD\">USD - US Dollar</option>\n          <option value=\"EUR\">EUR - Euro</option>\n          <option value=\"GBP\">GBP - British Pound</option>\n          <option value=\"JPY\">JPY - Japanese Yen</option>\n          <option value=\"CNY\">CNY - Chinese Yuan</option>\n          <option value=\"CAD\">CAD - Canadian Dollar</option>\n          <option value=\"AUD\">AUD - Australian Dollar</option>\n          <option value=\"CHF\">CHF - Swiss Franc</option>\n          <option value=\"HKD\">HKD - Hong Kong Dollar</option>\n          <option value=\"KRW\">KRW - South Korean Won</option>\n        </select>\n      </div>\n    </div>\n\n    <div class=\"flex justify-center\">\n      <button id=\"swap\" class=\"bg-white border border-neutral-200 rounded-full w-12 h-12 flex items-center justify-center active:bg-neutral-100 transition-colors\">\n        <span class=\"text-xl text-neutral-600\">‚áÖ</span>\n      </button>\n    </div>\n\n    <div class=\"bg-white border border-neutral-200 rounded-lg overflow-hidden\">\n      <div id=\"result\" class=\"px-4 py-3 text-2xl text-neutral-800\">0.00</div>\n      <div class=\"border-t border-neutral-200\">\n        <select id=\"to\" class=\"w-full px-4 py-3 bg-white text-neutral-600 focus:outline-none appearance-none\">\n          <option value=\"USD\">USD - US Dollar</option>\n          <option value=\"EUR\" selected>EUR - Euro</option>\n          <option value=\"GBP\">GBP - British Pound</option>\n          <option value=\"JPY\">JPY - Japanese Yen</option>\n          <option value=\"CNY\">CNY - Chinese Yuan</option>\n          <option value=\"CAD\">CAD - Canadian Dollar</option>\n          <option value=\"AUD\">AUD - Australian Dollar</option>\n          <option value=\"CHF\">CHF - Swiss Franc</option>\n          <option value=\"HKD\">HKD - Hong Kong Dollar</option>\n          <option value=\"KRW\">KRW - South Korean Won</option>\n        </select>\n      </div>\n    </div>\n\n    <div class=\"text-center text-xs text-neutral-400 space-y-1\">\n      <div id=\"rate\">1 USD = 0.00 EUR</div>\n      <div id=\"updated\">Loading...</div>\n    </div>\n  </div>\n</div>\n\n<script>\nconst amt = document.getElementById('amount');\nconst from = document.getElementById('from');\nconst to = document.getElementById('to');\nconst result = document.getElementById('result');\nconst rate = document.getElementById('rate');\nconst updated = document.getElementById('updated');\nconst swap = document.getElementById('swap');\n\nconst CACHE_KEY = 'currencyRates';\nconst CACHE_TIMESTAMP_KEY = 'currencyRatesTimestamp';\nconst PREFS_KEY = 'currencyPrefs';\nconst CACHE_DURATION = 3600000; // 1 hour\n\nlet rates = {};\nlet lastUpdate = null;\n\nfunction loadPrefs() {\n  const prefs = localStorage.getItem(PREFS_KEY);\n  if (prefs) {\n    const p = JSON.parse(prefs);\n    if (p.from) from.value = p.from;\n    if (p.to) to.value = p.to;\n  }\n}\n\nfunction savePrefs() {\n  localStorage.setItem(PREFS_KEY, JSON.stringify({\n    from: from.value,\n    to: to.value\n  }));\n}\n\nfunction loadCache() {\n  const cached = localStorage.getItem(CACHE_KEY);\n  const timestamp = localStorage.getItem(CACHE_TIMESTAMP_KEY);\n  \n  if (cached && timestamp) {\n    const age = Date.now() - parseInt(timestamp);\n    if (age < CACHE_DURATION) {\n      rates = JSON.parse(cached);\n      lastUpdate = parseInt(timestamp);\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction saveCache(data) {\n  const now = Date.now();\n  localStorage.setItem(CACHE_KEY, JSON.stringify(data));\n  localStorage.setItem(CACHE_TIMESTAMP_KEY, now.toString());\n  lastUpdate = now;\n}\n\nfunction formatDate(timestamp) {\n  const d = new Date(timestamp);\n  const now = new Date();\n  const diff = now - d;\n  \n  if (diff < 60000) return 'Updated just now';\n  if (diff < 3600000) return `Updated ${Math.floor(diff / 60000)}m ago`;\n  \n  const opts = { month: 'short', day: 'numeric', hour: 'numeric', minute: '2-digit' };\n  return `Updated ${d.toLocaleDateString('en-US', opts)}`;\n}\n\nfunction updateTimestamp() {\n  if (lastUpdate) {\n    updated.textContent = formatDate(lastUpdate);\n  }\n}\n\nasync function fetchRates() {\n  if (loadCache()) {\n    convert();\n    updateTimestamp();\n    return;\n  }\n  \n  try {\n    const res = await fetch('https://api.exchangerate-api.com/v4/latest/USD');\n    const data = await res.json();\n    rates = data.rates;\n    rates.USD = 1;\n    saveCache(rates);\n    convert();\n    updateTimestamp();\n  } catch (e) {\n    rate.textContent = 'Failed to load rates';\n    updated.textContent = 'Update failed';\n  }\n}\n\nfunction convert() {\n  const a = parseFloat(amt.value) || 0;\n  const f = from.value;\n  const t = to.value;\n  \n  if (rates[f] && rates[t]) {\n    const usd = a / rates[f];\n    const res = usd * rates[t];\n    result.textContent = res.toFixed(2);\n    \n    const r = rates[t] / rates[f];\n    rate.textContent = `1 ${f} = ${r.toFixed(4)} ${t}`;\n  }\n}\n\nswap.addEventListener('click', () => {\n  const temp = from.value;\n  from.value = to.value;\n  to.value = temp;\n  savePrefs();\n  convert();\n});\n\namt.addEventListener('input', convert);\nfrom.addEventListener('change', () => {\n  savePrefs();\n  convert();\n});\nto.addEventListener('change', () => {\n  savePrefs();\n  convert();\n});\n\nloadPrefs();\nfetchRates();\nsetInterval(updateTimestamp, 60000); // update timestamp every minute\n</script>\n</body>\n</html>"
    },
    {
      "name": "Calculator.app",
      "path": "/Applets/Calculator.app",
      "isDirectory": false,
      "type": "html",
      "icon": "üßÆ",
      "status": "active",
      "shareId": "aefde2d4ded237e1cef2a6de170fa167",
      "content": "<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  \n  <link rel=\"stylesheet\" href=\"/fonts/fonts.css\">\n  <!-- ts=1762280005141 --> \n  \n  <script type=\"module\" src=\"https://cdnjs.cloudflare.com/ajax/libs/three.js/0.174.0/three.module.min.js\"></script>\n  <script src=\"https://cdn.tailwindcss.com/3.4.16\"></script>\n  <script>\n    tailwind.config = {\n      theme: {\n        extend: {\n          fontFamily: {\n            sans: [\"Geneva-12\", \"ArkPixel\", \"SerenityOS-Emoji\", \"sans-serif\"],\n            mono: [\"Monaco\", \"ArkPixel\", \"SerenityOS-Emoji\", \"ui-monospace\", \"SFMono-Regular\", \"Menlo\", \"Monaco\", \"Consolas\", \"Liberation Mono\", \"Courier New\", \"monospace\"],\n            serif: [\"Mondwest\", \"Yu Mincho\", \"Hiragino Mincho Pro\", \"Georgia\", \"Palatino\", \"SerenityOS-Emoji\", \"serif\"],\n            emoji: [\"SerenityOS-Emoji\", \"AppleColorEmoji\", \"AppleColorEmojiFallback\"],\n            'geneva': [\"Geneva-12\", \"ArkPixel\", \"SerenityOS-Emoji\", \"system-ui\", \"-apple-system\", \"sans-serif\"],\n            'mondwest': [\"Mondwest\", \"Yu Mincho\", \"Hiragino Mincho Pro\", \"Georgia\", \"Palatino\", \"Yu Mincho\", \"Hiragino Mincho Pro\", \"serif\"],\n            'neuebit': [\"NeueBit\", \"ArkPixel\", \"SerenityOS-Emoji\", \"Helvetica\", \"Arial\", \"Hiragino Sans\", \"sans-serif\"],\n            'monaco': [\"Monaco\", \"ArkPixel\", \"SerenityOS-Emoji\", \"monospace\"],\n            'jacquard': [\"Jacquard\", \"Yu Mincho\", \"Hiragino Mincho Pro\", \"Georgia\", \"Palatino\", \"serif\"]\n          }\n        }\n      }\n    }\n  </script>\n  <style>\n    * {\n      box-sizing: border-box;\n      \n    }\n    html, body {\n      margin: 0;\n      overflow-x: auto; /* Allow horizontal scroll if content overflows */\n      width: 100%;\n      height: 100%;\n      max-width: 100%; /* Prevent body from exceeding viewport width */\n      \n    }\n    \n    /* Ensure pre doesn't break layout */\n    pre {\n      white-space: pre-wrap; /* Allow wrapping */\n      word-break: break-all; /* Break long words */\n    }\n  </style>\n  \n  <!-- Move click interceptor script to head for earlier execution -->\n  <script>\n    document.addEventListener('DOMContentLoaded', function() {\n      document.addEventListener('click', function(event) {\n        var targetElement = event.target.closest('a');\n        // Only intercept if it's a valid link and NOT inside the draggable toolbar\n        if (targetElement && targetElement.href && !targetElement.closest('[data-drag-controls]')) {\n          event.preventDefault();\n          event.stopPropagation();\n          try {\n            // Resolve relative URLs against the document's base URI (if set) or window location\n            const absoluteUrl = new URL(targetElement.getAttribute('href'), document.baseURI || window.location.href).href;\n            // Use a specific message type for AI HTML navigation\n            window.parent.postMessage({ type: 'aiHtmlNavigation', url: absoluteUrl }, '*');\n            console.log('Intercepted link click:', absoluteUrl);\n          } catch (e) { console.error(\"Error resolving/posting URL:\", e); }\n        }\n      }, true); // Use capture phase to intercept early\n    });\n    \n    // Also add immediate execution version for documents that load quickly\n    // This helps ensure we don't miss any clicks during initial page load\n    (function() {\n      document.addEventListener('click', function(event) {\n        var targetElement = event.target.closest('a');\n        // Only intercept if it's a valid link and NOT inside the draggable toolbar\n        if (targetElement && targetElement.href && !targetElement.closest('[data-drag-controls]')) {\n          event.preventDefault();\n          event.stopPropagation();\n          try {\n            // Resolve relative URLs against the document's base URI (if set) or window location\n            const absoluteUrl = new URL(targetElement.getAttribute('href'), document.baseURI || window.location.href).href;\n            // Use a specific message type for AI HTML navigation\n            window.parent.postMessage({ type: 'aiHtmlNavigation', url: absoluteUrl }, '*');\n            console.log('Intercepted link click (immediate handler):', absoluteUrl);\n          } catch (e) { console.error(\"Error resolving/posting URL:\", e); }\n        }\n      }, true); // Use capture phase to intercept early\n    })();\n  </script>\n \n</head>\n<body>\n  <div class=\"w-full min-h-screen bg-black font-geneva flex flex-col\">\n  <div class=\"flex-1 flex items-end justify-end p-6\">\n    <div id=\"display\" class=\"text-white text-6xl font-light text-right break-all\">0</div>\n  </div>\n  \n  <div class=\"p-4 pb-8 grid grid-cols-4 gap-3\">\n    <button class=\"btn bg-neutral-400 text-black\" data-action=\"clear\">AC</button>\n    <button class=\"btn bg-neutral-400 text-black\" data-action=\"negate\">+/-</button>\n    <button class=\"btn bg-neutral-400 text-black\" data-action=\"percent\">%</button>\n    <button class=\"btn bg-orange-500 text-white\" data-action=\"divide\">√∑</button>\n    \n    <button class=\"btn bg-neutral-700 text-white\" data-num=\"7\">7</button>\n    <button class=\"btn bg-neutral-700 text-white\" data-num=\"8\">8</button>\n    <button class=\"btn bg-neutral-700 text-white\" data-num=\"9\">9</button>\n    <button class=\"btn bg-orange-500 text-white\" data-action=\"multiply\">√ó</button>\n    \n    <button class=\"btn bg-neutral-700 text-white\" data-num=\"4\">4</button>\n    <button class=\"btn bg-neutral-700 text-white\" data-num=\"5\">5</button>\n    <button class=\"btn bg-neutral-700 text-white\" data-num=\"6\">6</button>\n    <button class=\"btn bg-orange-500 text-white\" data-action=\"subtract\">-</button>\n    \n    <button class=\"btn bg-neutral-700 text-white\" data-num=\"1\">1</button>\n    <button class=\"btn bg-neutral-700 text-white\" data-num=\"2\">2</button>\n    <button class=\"btn bg-neutral-700 text-white\" data-num=\"3\">3</button>\n    <button class=\"btn bg-orange-500 text-white\" data-action=\"add\">+</button>\n    \n    <button class=\"btn btn-wide bg-neutral-700 text-white col-span-2\" data-num=\"0\">0</button>\n    <button class=\"btn bg-neutral-700 text-white\" data-action=\"decimal\">.</button>\n    <button class=\"btn bg-orange-500 text-white\" data-action=\"equals\">=</button>\n  </div>\n</div>\n\n<style>\n.btn {\n  aspect-ratio: 1;\n  border-radius: 50%;\n  font-size: 1.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: opacity 0.1s;\n  cursor: pointer;\n  border: none;\n}\n.btn:active {\n  opacity: 0.6;\n}\n.btn-wide {\n  aspect-ratio: auto;\n  border-radius: 3rem;\n  justify-content: flex-start;\n  padding-left: 2rem;\n}\n</style>\n\n<script>\nconst display = document.getElementById('display');\n\nlet current = '0';\nlet prev = null;\nlet op = null;\nlet reset = false;\n\nfunction updateDisplay() {\n  display.textContent = current;\n}\n\nfunction clear() {\n  current = '0';\n  prev = null;\n  op = null;\n  reset = false;\n}\n\nfunction appendNum(num) {\n  if (reset) {\n    current = num;\n    reset = false;\n  } else {\n    current = current === '0' ? num : current + num;\n  }\n}\n\nfunction appendDecimal() {\n  if (reset) {\n    current = '0.';\n    reset = false;\n  } else if (!current.includes('.')) {\n    current += '.';\n  }\n}\n\nfunction negate() {\n  current = String(parseFloat(current) * -1);\n}\n\nfunction percent() {\n  current = String(parseFloat(current) / 100);\n}\n\nfunction setOp(o) {\n  if (op && !reset) {\n    calculate();\n  }\n  prev = current;\n  op = o;\n  reset = true;\n}\n\nfunction calculate() {\n  if (!prev || !op) return;\n  \n  const a = parseFloat(prev);\n  const b = parseFloat(current);\n  let result = 0;\n  \n  switch(op) {\n    case 'add': result = a + b; break;\n    case 'subtract': result = a - b; break;\n    case 'multiply': result = a * b; break;\n    case 'divide': result = b !== 0 ? a / b : 0; break;\n  }\n  \n  current = String(result);\n  prev = null;\n  op = null;\n  reset = true;\n}\n\ndocument.querySelectorAll('.btn').forEach(btn => {\n  btn.addEventListener('click', () => {\n    const num = btn.dataset.num;\n    const action = btn.dataset.action;\n    \n    if (num !== undefined) {\n      appendNum(num);\n    } else if (action === 'clear') {\n      clear();\n    } else if (action === 'decimal') {\n      appendDecimal();\n    } else if (action === 'negate') {\n      negate();\n    } else if (action === 'percent') {\n      percent();\n    } else if (action === 'equals') {\n      calculate();\n    } else if (action) {\n      setOp(action);\n    }\n    \n    updateDisplay();\n  });\n});\n</script>\n</body>\n</html>"
    }
  ]
}